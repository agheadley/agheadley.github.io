var GRADE = {
  

 
  grade: [
    {
      CourseCode: "A",
      Grade: "A*",
      UniScore: 10,
      isView: true,
      GradeType: "A"
    },
    {
      CourseCode: "A",
      Grade: "A",
      UniScore: 8.6,
      isView: true,
      GradeType: "A"
    },
    {
      CourseCode: "A",
      Grade: "B",
      UniScore: 7.1,
      isView: true,
      GradeType: "A"
    },
    {
      CourseCode: "A",
      Grade: "C",
      UniScore: 5.7,
      isView: true,
      GradeType: "A"
    },
    {
      CourseCode: "A",
      Grade: "D",
      UniScore: 4.3,
      isView: true,
      GradeType: "A"
    },
    {
      CourseCode: "A",
      Grade: "E",
      UniScore: 2.9,
      isView: true,
      GradeType: "A"
    },
    { CourseCode: "A", Grade: "U", UniScore: 0, isView: true, GradeType: "A" },
    { CourseCode: "A", Grade: "X", UniScore: 0, isView: false, GradeType: "A" },
    {
      CourseCode: "PreU",
      Grade: "D1",
      UniScore: 10,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "D2",
      UniScore: 10,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "D3",
      UniScore: 8.6,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "M1",
      UniScore: 8.6,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "M2",
      UniScore: 7.1,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "M3",
      UniScore: 5.7,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "P1",
      UniScore: 5.7,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "P2",
      UniScore: 4.3,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "P3",
      UniScore: 2.9,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "U",
      UniScore: 0,
      isView: true,
      GradeType: "PreU"
    },
    {
      CourseCode: "PreU",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "PreU"
    },
    {
      CourseCode: "BTEC",
      Grade: "D*",
      UniScore: 10,
      isView: true,
      GradeType: "BTEC"
    },
    {
      CourseCode: "BTEC",
      Grade: "D",
      UniScore: 8.6,
      isView: true,
      GradeType: "BTEC"
    },
    {
      CourseCode: "BTEC",
      Grade: "M",
      UniScore: 5.7,
      isView: true,
      GradeType: "BTEC"
    },
    {
      CourseCode: "BTEC",
      Grade: "P",
      UniScore: 2.9,
      isView: true,
      GradeType: "BTEC"
    },
    {
      CourseCode: "BTEC",
      Grade: "U",
      UniScore: 0,
      isView: true,
      GradeType: "BTEC"
    },
    {
      CourseCode: "BTEC",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "BTEC"
    },
    {
      CourseCode: "IB HL",
      Grade: "7",
      UniScore: 10,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "6",
      UniScore: 8.6,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "5",
      UniScore: 5.7,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "4",
      UniScore: 4.3,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "3",
      UniScore: 2.9,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "2",
      UniScore: 1.0,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "1",
      UniScore: 0,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB HL",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "7",
      UniScore: 5,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "6",
      UniScore: 4.3,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "5",
      UniScore: 2.85,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "4",
      UniScore: 2.15,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "3",
      UniScore: 1.45,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "2",
      UniScore: 0.5,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "1",
      UniScore: 0,
      isView: true,
      GradeType: "IB"
    },
    {
      CourseCode: "IB SL",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "IB"
    },
    {
      CourseCode: "GCSE",
      Grade: "A*",
      UniScore: 8,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "A",
      UniScore: 7,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "B",
      UniScore: 6,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "C",
      UniScore: 5,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "D",
      UniScore: 4,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "E",
      UniScore: 3,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "F",
      UniScore: 2,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "G",
      UniScore: 1,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "U",
      UniScore: 0,
      isView: true,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "GCSEAG"
    },
    {
      CourseCode: "GCSE",
      Grade: "9",
      UniScore: 8.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "8",
      UniScore: 7.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "7",
      UniScore: 7,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "6",
      UniScore: 6.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "5",
      UniScore: 5.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "4",
      UniScore: 4.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "3",
      UniScore: 3.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "2",
      UniScore: 2.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "1",
      UniScore: 1.5,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "U",
      UniScore: 0,
      isView: true,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "GCSE",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "GCSE91"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "D2*",
      UniScore: 9,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "M2",
      UniScore: 7,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "P2",
      UniScore: 6,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "D1",
      UniScore: 5,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "M1",
      UniScore: 4,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "P1",
      UniScore: 3,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "U",
      UniScore: 0,
      isView: true,
      GradeType: "OCRNat"
    },
    {
      CourseCode: "OCRNat L2",
      Grade: "X",
      UniScore: 0,
      isView: false,
      GradeType: "OCRNat"
    }
  ],
  
  data: [],

  createSampleData: function() {
    this.data = [];

    for (let i = 0; i < this.sampleSetInfo.length; i++) {
      let sample = this.sampleSetInfo[i].SampleGrade
        ? this.sampleSetInfo[i].SampleGrade
        : null;
      let gradeArray = this.getGradeList(this.sampleSetInfo[i].CourseCode,[sample]);
      //console.log(this.sampleSetInfo[i]);
      //console.log(gradeArray.data);

      if (gradeArray.isValid) {
        for (let set = 0; set < this.sampleSetInfo[i].SetSize; set++) {
          //let record = this.templateData;
          let record = Object.assign({}, this.templateData);

          let choiceIndex = this.randomIntFromInterval(
            0,
            gradeArray.data.length - 1
          );
          let down = choiceIndex - 3 < 0 ? 0 : choiceIndex - 3;
          let up =
            choiceIndex + 3 > gradeArray.data.length - 1
              ? gradeArray.data.length - 1
              : choiceIndex + 3;
          let predIndex = this.randomIntFromInterval(down, up);
          //console.log(choiceIndex, predIndex);
          record.Grade = gradeArray.data[choiceIndex].Grade;
          if(record.Grade==='X') {
            record.UniScore=null;
            record.PredGrade=null;
            record.PredUniScore=null;
            record.RawRes=null;
          } else {
            record.UniScore = gradeArray.data[choiceIndex].UniScore;
            record.PredGrade = gradeArray.data[predIndex].Grade;
            record.PredUniScore = gradeArray.data[predIndex].UniScore;
            record.RawRes = record.UniScore - gradeArray.data[predIndex].UniScore;
          }
          record.AcademicYearCode = this.sampleSetInfo[i].AcademicYearCode;
          record.DepartmentCode = this.sampleSetInfo[i].DepartmentCode;
          record.Form = this.sampleSetInfo[i].Form;
          record.CourseCode = this.sampleSetInfo[i].CourseCode;
          record.SubjectCode = this.sampleSetInfo[i].SubjectCode;
          record.ResultCode = this.sampleSetInfo[i].ResultCode;
          record.Title = this.sampleSetInfo[i].Title;
          record.Type = this.sampleSetInfo[i].Type;
          record.SetInfo = this.sampleSetInfo[i].SetInfo;
          //console.log(this.sampleSetInfo[i].AssessmentDate);
          record.AssessmentDate = this.sampleSetInfo[i].AssessmentDate;
          

          record.PupilNumber = Number(
            this.sampleSetInfo[i].SetID.toString() + set.toString()
          );
          record.Forename = "f" + set;
          record.Surname = "s" + set;

          this.data.push(record);
        } // of each sampleSetInfo loop
      }
    } // end of main loop
    //console.log(this.data);
    return this.data;
  },

  randomIntFromInterval: function(min, max) {
    return Math.floor(Math.random() * (max - min + 1) + min);
  },

  trim: function(x) {
    if (x) return x.replace(/^\s+|\s+$/gm, "");
    else return null;
  },
  
  // returns objectArr of grades checked against sampleGradeArray - e.g. 9,8 for new GCSE only.
  getGradeList:function(courseCodeText,sampleGradeArray) {
    let result = { isValid: false, data: null };
    // avoid U and X common to many grade types.
    let sampleGrade=sampleGradeArray.filter(el=>this.trim(el)!='X' && this.trim(el)!='U');
    let sampleGradeText
    if(sampleGrade.length>0) sampleGradeText=sampleGrade[0];
      
    let g = this.grade.filter(el => this.trim(el.CourseCode) === this.trim(courseCodeText));
    if (g.length > 0) {
      if (sampleGradeText) {
        let check = g.filter(
          el => this.trim(el.Grade) === this.trim(sampleGradeText)
        );
        if (check.length > 0) {
          if (check[0].GradeType) {
            g = g.filter(
              el => this.trim(el.GradeType) === this.trim(check[0].GradeType)
            );
          }
        }
      }
      
      result.isValid = true;
      result.data = g;
    }
    return result;
  },

  sampleSetInfo: [
    {
      AcademicYearCode: "16/17",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Sum 1",
      SetInfo: "C.B",
      SetSize: 11,
      SetID: 201,
      AssessmentDate:"2017-06-25TZ12345.67"
    },
    {
      AcademicYearCode: "16/17",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Sum 1",
      SetInfo: "C.E",
      SetSize: 11,
      SetID: 202,
      AssessmentDate:"2017-06-25TZ12345.67"
    },
    {
      AcademicYearCode: "16/17",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Sum 1",
      SetInfo: "C.F",
      SetSize: 10,
      SetID: 203,
      AssessmentDate:"2017-06-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Win 1",
      SetInfo: "C.A",
      SetSize: 10,
      SetID: 201,
      AssessmentDate:"2017-09-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Win 1",
      SetInfo: "C.C",
      SetSize: 9,
      SetID: 202,
      AssessmentDate:"2017-09-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Win 1",
      SetInfo: "C.D",
      SetSize: 7,
      SetID: 203,
      AssessmentDate:"2017-09-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Win 2",
      SetInfo: "C.A",
      SetSize: 10,
      SetID: 201,
      AssessmentDate:"2017-11-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Win 2",
      SetInfo: "C.C",
      SetSize: 9,
      SetID: 202,
      AssessmentDate:"2017-11-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "SCA",
      Title: "F6 Win 2",
      SetInfo: "C.D",
      SetSize: 7,
      SetID: 203,
      AssessmentDate:"2017-11-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 5,
      CourseCode: "GCSE",
      SubjectCode: "C",
      SampleGrade: "A*",
      ResultCode: "1C",
      Type: "IntExam",
      Title: "F5 Spr 18",
      SetInfo: "Sc.1",
      SetSize: 20,
      SetID: 111,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 5,
      CourseCode: "GCSE",
      SubjectCode: "C",
      SampleGrade: "A*",
      ResultCode: "1C",
      Type: "IntExam",
      Title: "F5 Spr 18",
      SetInfo: "Sc.2",
      SetSize: 24,
      SetID: 112,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 5,
      CourseCode: "GCSE",
      SampleGrade: "A*",
      SubjectCode: "C",
      ResultCode: "1C",
      Type: "IntExam",
      Title: "F5 Spr 18",
      SetInfo: "Sc.3",
      SetSize: 21,
      SetID: 113,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 5,
      CourseCode: "GCSE",
      SampleGrade: "9",
      SubjectCode: "C",
      ResultCode: "SS",
      Type: "IntExam",
      Title: "F5 Spr 18",
      SetInfo: "Sc.x",
      SetSize: 15,
      SetID: 119,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "IntExam",
      Title: "F6 Spr 18",
      SetInfo: "C.A",
      SetSize: 10,
      SetID: 201,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "IntExam",
      Title: "F6 Spr 18",
      SetInfo: "C.C",
      SetSize: 9,
      SetID: 202,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "A",
      SubjectCode: "C",
      ResultCode: null,
      Type: "IntExam",
      Title: "F6 Spr 18",
      SetInfo: "C.D",
      SetSize: 7,
      SetID: 203,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "IB HL",
      SubjectCode: "C",
      ResultCode: null,
      Type: "IntExam",
      Title: "F6 Spr 18",
      SetInfo: "C.Ah1",
      SetSize: 8,
      SetID: 301,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "IB HL",
      SubjectCode: "C",
      ResultCode: null,
      Type: "IntExam",
      Title: "F6 Spr 18",
      SetInfo: "C.Ah2",
      SetSize: 6,
      SetID: 302,
      AssessmentDate:"2018-01-25TZ12345.67"
    },
    {
      AcademicYearCode: "17/18",
      DepartmentCode: "C",
      Form: 6,
      CourseCode: "IB SL",
      SubjectCode: "C",
      ResultCode: null,
      Type: "IntExam",
      Title: "F6 Spr 18",
      SetInfo: "C.Es",
      SetSize: 5,
      SetID: 309,
      AssessmentDate:"2018-01-25TZ12345.67"
    }
  ],

  templateData: {
    PupilNumber: null,
    Forename: null,
    Surname: null,
    DepartmentCode: null,
    CourseCode: null,
    Type: null,
    Title: null,
    AcademicYearCode: null,
    Form: null,
    AssessmentDate: null,
    SubjectCode: null,
    ResultCode: null,
    SetInfo: null,
    Grade: null,
    UniScore: null,
    PredGrade: null,
    PredUniScore: null,
    RawRes: null,
    StdRes: null,
    AssessmentDate:null
  }
};

